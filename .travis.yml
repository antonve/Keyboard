language:  objective-c
os:        osx
osx_image: xcode10.1 # macOS 10.13 (https://docs.travis-ci.com/user/reference/osx/)

sudo: required

branches:
  only:
    - master
    - /^v[\d\.]+$/

cache:
  directories:
    - vendor/bundle
    - Pods

script:
  - make build

before_deploy:
  - make build
  - make dist

deploy:
  provider: releases
  api_key:
    secure: mGqTkht0w2RTJ0XdXpGozIdiKfWlEKXi7fA3pXxyarM0MrapIrcRqpFGqHhjzGlX3AwyKEy91M8sqTyXGbbaIfQ3xmG7WpYGrL04rGX+6DzH+WG6xrTaDY9k0IPXktyKea5mBnLAqu8RRye93bUgUaoJELakC/sQfxEVjPeBLyYLcCyHwSb3943GGS0imx/VGGkE5bQdcJHJA11DOYasmwNswllotUQGg6iZ7WUzHJmDBkQ7ni6s5iCK0kvgs5n8H3cT2aSMi6Yj4fbq1UsXznv3dIaZbS+Cz7rcIvZnlm5yLZJ4jWzmUDyiIf9R6F2FSG8xB3OevND4dSfBzHmsAsYaqXEcSFD07nXDSHjaZPaebO+lkjDC2a3fS/bY6Bb107CpEvlYoCeyCDO+RIAv27tSA8Uh11Y1qk1+OlTsMk31WEm6dpAbzh6hwyDAPKEOBojRzONq0Y89M1NgxJLwP81GUcFhBKBFK2xNdK4ghW5sjawNnQuCbZsb5p48MJTbZMfEZfnvMTlG0jBkTGuXrc8G2be+oF21GujimeBFcalK58NDi6w1Qe9Vgakt+lbx/nTF2tgdOz+iTCadDI10mkY4O+/PZ8KyCD5nkSqZXztt9DEEYk+Fln0klMJEtREqOQ60+9puuuZCmLWVzlynd02WHTMRsA6ruNCY6KRWIak=
  skip_cleanup: true
  file_glob: true
  file: build/*.zip
  on:
    tags: true
    repo: creasty/Keyboard

notifications:
  email: false
  slack:
    secure: hEYbhNFw2o9hZV1+AbJIWP/4Sg5+wT7Oz2VydBVjyqRh1njdI4ntqsmC+NUmaqr3ory3AJTf+TZmAfySPk2eR2Ifudgk+MeBypt706l3UBxV0u+gVnXVpl8Yh0XklInE6+xIt95o3+uzH41xKDhDM8Pac4cWbaDao7eQz/9BBTTexfG2gijWPOUnbVpzztoHjdvSJoLq7CBMLbBti3yYIpX0/v9ekVfKPA8EcSuwPigaZtWbQOx368nGlZDAOrp1o8aMSK+ojUtWRvDhkflr7jCu3xHpAZe/y3ZDvYPgCQQuoXibZvIIYdcvVOt0/+1sq5Srod1yhZi48/mPNOrxZC9uwG0FZdkWFZkLrWSYIBWDXvrUEJawSKxbCaYEYZz1C5J0JkVxfM08UnvGzOMBk6a5tOtL6v0E/kxHZ066f35Qo9VnXIl8MHGEA9TpvbBDheva3+Rumu2DOg0AirnznR2JZcggcnu9jvNYWLsXgG1yf+g02NWVJi9PCzXo53pUi5KUutZFvhH6JSi/Jsfi/omu6/0PeHBFknu8XwgNM+Ynp8iSZKWFhQiAWwDwcWbNpYqJOoEW5kvCfmItFmb6yVFQ2/eXs/5F64VEAg8ZGV2mOXGObJi3zfghkhLfyRZucoxSagnJtHao3qdQz0qiejtBPTTDTB+T8L1tSqFmE7M=
